<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Customizable Text Logo</title>
<style>
        @font-face {
            font-family: 'VintageHat';
            src: url('VintageHat.OTF') format('opentype');
        }

        @import url("//fonts.googleapis.com/css2?family=Alfa+Slab+One:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap");

        #lineColorPicker{
 width:964px;
}


/* Label */
.controls div label{
 padding-left:53px;
}

/* Download */
#downloadBtn{
 position:relative;
 width:47%;
 left:26%;
}

/* Heading */
.container h1{
 font-family:Arial,'Helvetica Neue',Helvetica,sans-serif;
}

/* Controls */
.container .controls{
 position:static;
 z-index:138;
 transform:translatex(0px) translatey(0px);
 float:none;
 opacity:1;
 clear:none;
 display:inline-flex;
 cursor:auto;
 left:auto !important;
 grid-template-columns:1fr;
 align-content:center;
 justify-content:center;
 pointer-events:auto;
 flex-direction:column;
 align-items:normal;
 width:949px;
}

/* Container */
.container{
 transform:translatex(0px) translatey(0px);
 position:static;
 display:grid;
 align-content:center;
 justify-content:center;
}


        h1 {
  font-family: 'Vintage Hat', sans-serif;
}

/* Label */
.container .controls label{
 text-align:center;
 text-shadow:none;
 text-transform:uppercase;
 font-style:normal;
 line-height:24.4px;
 font-size:11px;
color:rgba(0,0,0,0.27);
     font-weight:700;

}

/* Top text */
#topText{
 transform:translatex(0px) translatey(0px);
 float:none;
 display:inline-grid;
}

/* Font color picker */
#fontColorPicker{
 display:inline-flex;
 flex-wrap:wrap;
 width:100%;
 transform:translatex(0px) translatey(0px);
 background-color:transparent !important;
     justify-content:center;
 width:100%;
}

/* Line color picker */
#lineColorPicker{
 display:inline-flex;
 flex-wrap:wrap;
 flex-direction:row;
    justify-content:center;
 width:100%;
}

/* Download */
#downloadBtn{
 background-image:linear-gradient(to right, #0575e6 0%, #021b79 100%);
}

/* Width slider */
#svgWidthSlider{
 background-color:transparent;
 box-shadow:none;
display:inline-grid;
}

        .container {
            font-family: 'Roboto', sans-serif;
            margin: 20px;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 20px;
            background-color: #fff;
        }
        .controls label {
            font-weight: 500;
            margin-right: 10px;
        }
        .controls input[type="text"] {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .controls button {
            background-color: #6200ea;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .controls button:hover {
            background-color: #3700b3;
        }
        .color-option {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            margin-right: 5px;
            cursor: pointer;
        }

        .canvas-container {
            background-color: #ededed;
            margin-bottom: 30px;
        }
            
        #fontColorPicker, #lineColorPicker {
  display: flex;
  flex-direction: row;
            padding: 20px;
}
        .logo {
           text-align: center;
            padding-top: 15px;
            padding-bottom: 20px;
        }

    </style>
</head>
<body>
<div class="container">
<div class="logo">
<?xml version="1.0" encoding="UTF-8"?>
<svg data-name="Layer 1" height="43.608" id="a" viewbox="0 0 485.693 43.608" width="485.693" xmlns="http://www.w3.org/2000/svg">
<g fill="none" isolation="isolate">
<g fill="none" isolation="isolate">
<path d="m2.939,10.728v-1.852h11.428v1.852h-.806c-1.66,0-2.489.692-2.489,2.075v6.514h11.183v-6.514c0-1.383-.795-2.075-2.384-2.075h-.911v-1.852h11.463v1.852h-.833c-1.619,0-2.428.691-2.428,2.072v15.141c0,1.403.783,2.104,2.349,2.104h.912v1.852h-11.463v-1.852h.833c1.642,0,2.463-.703,2.463-2.107v-6.769h-11.148l-.035,6.066v.703c0,1.405.798,2.107,2.394,2.107h.901v1.852H2.939v-1.852h.876c1.613,0,2.419-.701,2.419-2.104v-15.141c0-.658-.208-1.169-.625-1.53-.417-.361-1.006-.542-1.77-.542h-.901Z" fill="#b2b2b2"></path>
<path d="m33.085,31.897v-1.852h.596c1.332,0,2.255-.695,2.769-2.083l.246-.694,7.292-18.806h3.891l8.063,18.782.315.7c.561,1.401,1.438,2.102,2.629,2.102h.526v1.852h-10.271v-1.852h.666c1.098,0,1.647-.37,1.647-1.111,0-.296-.082-.624-.245-.983l-.281-.698-.911-2.252h-9.711l-.912,2.252-.28.698c-.14.36-.21.656-.21.888,0,.804.619,1.206,1.858,1.206h.736v1.852h-8.414Zm11.877-19.238l-4.03,10.585h8.279l-4.249-10.585Z" fill="#b2b2b2"></path>
<path d="m63.331,8.302h2.208l.561.574h15.565c1.004,0,1.612-.032,1.823-.096l.666-.479h2.173l-1.372,6.002h-1.935c-.07-.675-.152-1.176-.246-1.503-.094-.327-.259-.648-.493-.965-.329-.421-.704-.711-1.125-.87-.422-.158-1.044-.237-1.865-.237h-2.709v17.216c0,.403.058.711.175.923.117.213.327.414.631.605.538.382,1.18.573,1.928.573h.841v1.852h-12.024v-1.852h.841c1.799,0,2.699-.695,2.699-2.083V10.728h-2.62c-1.257,0-2.293.317-3.108.949-.396.317-.704.644-.926.981-.221.337-.483.886-.785,1.646h-2.166l1.262-6.002Z" fill="#b2b2b2"></path>
<path d="m102.939,8.876h11.955v1.852h-.876c-.889,0-1.583.187-2.086.559-.503.373-.754.878-.754,1.516v15.454c0,.681.088,1.128.263,1.341.175.213.742.319,1.7.319h3.12c.935,0,1.718-.106,2.349-.319.631-.212,1.227-.585,1.788-1.118.444-.425.824-.888,1.139-1.389.315-.5.66-1.197,1.034-2.091l2.174.032-1.265,6.864h-20.541v-1.852h.673c1.771,0,2.657-.695,2.657-2.083v-15.158c0-.659-.223-1.17-.666-1.532-.444-.362-1.099-.543-1.963-.543h-.701v-1.852Z" fill="#b2b2b2"></path>
<path d="m131.107,11.834c2.465-2.248,5.603-3.373,9.413-3.373,3.903,0,7.058,1.13,9.465,3.389,2.407,2.259,3.611,5.211,3.611,8.856,0,1.876-.328,3.528-.981,4.956-.655,1.428-1.683,2.707-3.085,3.836-2.408,1.918-5.364,2.877-8.87,2.877-3.88,0-7.059-1.108-9.535-3.325-2.478-2.216-3.716-5.094-3.716-8.632,0-3.474,1.232-6.335,3.699-8.584Zm3.664,1.169c-1.31,1.708-1.963,4.068-1.963,7.078,0,3.182.707,5.718,2.121,7.607,1.414,1.89,3.312,2.834,5.696,2.834,2.314,0,4.148-.838,5.504-2.514s2.034-3.956,2.034-6.839c0-3.31-.713-5.925-2.139-7.847-1.426-1.922-3.377-2.883-5.854-2.883-2.291,0-4.09.854-5.398,2.562Z" fill="#b2b2b2"></path>
<path d="m176.522,10.505l1.262-1.979h1.963l-.07,6.96h-1.998c-.468-.851-.859-1.484-1.174-1.9-.315-.415-.731-.824-1.245-1.229-1.59-1.32-3.366-1.979-5.329-1.979-2.501,0-4.517.921-6.047,2.762-1.531,1.841-2.296,4.252-2.296,7.232,0,3.001.783,5.407,2.349,7.215,1.565,1.81,3.646,2.714,6.24,2.714.514,0,1-.032,1.455-.096.456-.063.929-.18,1.42-.351.607-.148,1.086-.319,1.437-.511.07-.042.374-.234.912-.575v-4.438c0-1.383-.83-2.075-2.489-2.075h-.736v-1.852h10.622v1.852h-.351c-.701,0-1.25.181-1.647.542-.398.362-.596.873-.596,1.533v5.523c-.865.405-1.625.734-2.279.99-.981.383-2.15.713-3.506.99-1.706.362-3.4.543-5.083.543-3.179,0-5.983-.873-8.414-2.618-3.108-2.213-4.663-5.268-4.663-9.164,0-4.001,1.554-7.173,4.663-9.515,2.407-1.788,5.165-2.682,8.273-2.682,2.5,0,4.943.703,7.327,2.107h0Z" fill="#b2b2b2"></path>
<path d="m189.174,11.834c2.465-2.248,5.603-3.373,9.413-3.373,3.903,0,7.058,1.13,9.465,3.389,2.407,2.259,3.611,5.211,3.611,8.856,0,1.876-.328,3.528-.981,4.956-.655,1.428-1.683,2.707-3.085,3.836-2.408,1.918-5.364,2.877-8.87,2.877-3.88,0-7.059-1.108-9.535-3.325-2.478-2.216-3.716-5.094-3.716-8.632,0-3.474,1.232-6.335,3.699-8.584Zm3.664,1.169c-1.31,1.708-1.963,4.068-1.963,7.078,0,3.182.707,5.718,2.121,7.607,1.414,1.89,3.312,2.834,5.696,2.834,2.314,0,4.148-.838,5.504-2.514s2.034-3.956,2.034-6.839c0-3.31-.713-5.925-2.139-7.847-1.426-1.922-3.377-2.883-5.854-2.883-2.291,0-4.09.854-5.398,2.562Z" fill="#b2b2b2"></path>
<path d="m248.534,10.505l1.262-1.979h1.963l-.07,6.96h-1.998c-.468-.851-.859-1.484-1.174-1.9-.316-.415-.731-.824-1.245-1.229-1.59-1.32-3.366-1.979-5.329-1.979-2.501,0-4.517.921-6.047,2.762-1.531,1.841-2.296,4.252-2.296,7.232,0,3.001.783,5.407,2.349,7.215,1.565,1.81,3.646,2.714,6.24,2.714.514,0,1-.032,1.455-.096.456-.063.928-.18,1.42-.351.607-.148,1.086-.319,1.437-.511.07-.042.374-.234.911-.575v-4.438c0-1.383-.83-2.075-2.488-2.075h-.736v-1.852h10.622v1.852h-.351c-.701,0-1.251.181-1.647.542-.397.362-.596.873-.596,1.533v5.523c-.865.405-1.625.734-2.279.99-.981.383-2.15.713-3.506.99-1.706.362-3.4.543-5.083.543-3.179,0-5.983-.873-8.414-2.618-3.108-2.213-4.663-5.268-4.663-9.164,0-4.001,1.554-7.173,4.663-9.515,2.407-1.788,5.165-2.682,8.273-2.682,2.5,0,4.943.703,7.327,2.107h0Z" fill="#b2b2b2"></path>
<path d="m257.487,10.728v-1.852h21.524l.386,5.46-2.144.032c-.211-.717-.428-1.271-.65-1.661s-.539-.754-.949-1.092c-.409-.338-.855-.57-1.335-.697-.48-.126-1.189-.19-2.127-.19h-4.428c-.703,0-1.131.011-1.283.032-.152.021-.322.123-.51.302-.188.18-.281.631-.281,1.352v6.903h3.699c1.057,0,1.885-.208,2.484-.623.599-.415.898-.984.898-1.708v-.766h2.278v8.174h-2.244l-.034-.639c0-.83-.288-1.458-.863-1.884-.576-.425-1.403-.639-2.483-.639h-3.7l-.035,6.801c0,.639.012,1.043.035,1.213s.094.319.211.447c.093.171.28.283.561.335.28.053.724.08,1.332.08h4.522c1.939,0,3.389-.532,4.347-1.596.304-.319.607-.734.912-1.245.303-.511.666-1.224,1.086-2.139h2.139l-1.191,6.769h-22.156v-1.788h.842c1.659,0,2.488-.71,2.488-2.131v-15.174c0-1.383-.829-2.075-2.488-2.075h-.842Z" fill="#b2b2b2"></path>
<path d="m283.517,30.045h.771c1.706,0,2.559-.701,2.559-2.104v-15.141c0-1.381-.791-2.072-2.374-2.072h-.956v-1.852h7.515l14.256,16.763v-12.835c0-1.383-.783-2.075-2.349-2.075h-.912v-1.852h8.87v1.852h-.771c-.631,0-1.14.197-1.525.591-.386.394-.578.889-.578,1.484v19.381h-2.945l-15.495-18.199.035,13.256v.701c0,.702.251,1.228.754,1.578.503.351,1.128.526,1.876.526h.666v1.852h-9.396v-1.852Z" fill="#b2b2b2"></path>
<path d="m313.564,10.728v-1.852h21.524l.386,5.46-2.144.032c-.211-.717-.428-1.271-.65-1.661s-.539-.754-.949-1.092c-.409-.338-.855-.57-1.335-.697-.48-.126-1.189-.19-2.127-.19h-4.428c-.703,0-1.131.011-1.283.032-.152.021-.322.123-.51.302-.188.18-.281.631-.281,1.352v6.903h3.699c1.057,0,1.885-.208,2.484-.623.599-.415.898-.984.898-1.708v-.766h2.278v8.174h-2.244l-.034-.639c0-.83-.288-1.458-.863-1.884-.576-.425-1.403-.639-2.483-.639h-3.7l-.035,6.801c0,.639.012,1.043.035,1.213s.094.319.211.447c.093.171.28.283.561.335.28.053.724.08,1.332.08h4.522c1.939,0,3.389-.532,4.347-1.596.304-.319.607-.734.912-1.245.303-.511.666-1.224,1.086-2.139h2.139l-1.191,6.769h-22.156v-1.788h.842c1.659,0,2.488-.71,2.488-2.131v-15.174c0-1.383-.829-2.075-2.488-2.075h-.842Z" fill="#b2b2b2"></path>
<path d="m339.593,31.897v-1.852h.596c1.823,0,2.734-.695,2.734-2.083v-15.158c0-.659-.236-1.17-.708-1.532-.473-.362-1.146-.543-2.02-.543h-.603v-1.852h13.236c3.113,0,5.542.575,7.286,1.724,1.743,1.15,2.615,2.746,2.615,4.79,0,3.022-1.952,4.992-5.854,5.907l.631,1.596c.771,1.682,1.543,3.065,2.313,4.151.468.596.958,1.171,1.473,1.724.421.404.888.756,1.402,1.054.514.298,1.215.628,2.104.99v1.66c-1.099-.107-2.021-.234-2.77-.383-2.338-.361-4.324-1.319-5.96-2.874-.374-.319-.713-.66-1.017-1.021-.188-.213-.49-.617-.911-1.213-.421-.596-.795-1.208-1.122-1.836-.327-.627-.83-1.697-1.508-3.208l-3.681-.096v6.123c0,1.389.829,2.083,2.489,2.083h.806v1.852h-11.533Zm8.238-11.973h4.207c1.823,0,3.12-.361,3.892-1.085.958-.873,1.437-2.054,1.437-3.544,0-1.426-.444-2.543-1.332-3.353-.889-.809-2.127-1.213-3.716-1.213h-2.805c-.654,0-1.099.128-1.332.383s-.351.734-.351,1.437v7.375Z" fill="#b2b2b2"></path>
<path d="m367.482,31.897v-1.852h.596c1.332,0,2.255-.695,2.77-2.083l.245-.694,7.292-18.806h3.891l8.064,18.782.315.7c.561,1.401,1.438,2.102,2.629,2.102h.525v1.852h-10.271v-1.852h.666c1.099,0,1.648-.37,1.648-1.111,0-.296-.083-.624-.246-.983l-.28-.698-.911-2.252h-9.711l-.911,2.252-.281.698c-.14.36-.21.656-.21.888,0,.804.619,1.206,1.858,1.206h.735v1.852h-8.413Zm11.878-19.238l-4.03,10.585h8.278l-4.248-10.585Z" fill="#b2b2b2"></path>
<path d="m397.729,8.302h2.208l.561.574h15.565c1.005,0,1.612-.032,1.823-.096l.666-.479h2.174l-1.372,6.002h-1.936c-.07-.675-.152-1.176-.246-1.503-.094-.327-.259-.648-.493-.965-.328-.421-.704-.711-1.126-.87-.422-.158-1.044-.237-1.864-.237h-2.709v17.216c0,.403.058.711.175.923.117.213.327.414.631.605.538.382,1.181.573,1.929.573h.841v1.852h-12.024v-1.852h.842c1.8,0,2.699-.695,2.699-2.083V10.728h-2.62c-1.258,0-2.293.317-3.108.949-.396.317-.704.644-.926.981-.221.337-.483.886-.785,1.646h-2.166l1.263-6.002Z" fill="#b2b2b2"></path>
<path d="m427.089,11.834c2.466-2.248,5.604-3.373,9.413-3.373,3.902,0,7.058,1.13,9.465,3.389,2.407,2.259,3.611,5.211,3.611,8.856,0,1.876-.328,3.528-.981,4.956-.654,1.428-1.683,2.707-3.085,3.836-2.407,1.918-5.364,2.877-8.87,2.877-3.879,0-7.058-1.108-9.535-3.325-2.478-2.216-3.716-5.094-3.716-8.632,0-3.474,1.232-6.335,3.698-8.584Zm3.664,1.169c-1.31,1.708-1.964,4.068-1.964,7.078,0,3.182.707,5.718,2.121,7.607s3.313,2.834,5.697,2.834c2.313,0,4.147-.838,5.504-2.514,1.354-1.676,2.033-3.956,2.033-6.839,0-3.31-.714-5.925-2.139-7.847-1.426-1.922-3.378-2.883-5.854-2.883-2.291,0-4.09.854-5.398,2.562Z" fill="#b2b2b2"></path>
<path d="m452.242,31.897v-1.852h.596c1.823,0,2.734-.695,2.734-2.083v-15.158c0-.659-.236-1.17-.709-1.532-.472-.362-1.145-.543-2.019-.543h-.603v-1.852h13.236c3.113,0,5.542.575,7.285,1.724,1.744,1.15,2.616,2.746,2.616,4.79,0,3.022-1.952,4.992-5.854,5.907l.631,1.596c.771,1.682,1.543,3.065,2.313,4.151.468.596.958,1.171,1.473,1.724.421.404.888.756,1.402,1.054.514.298,1.215.628,2.104.99v1.66c-1.099-.107-2.022-.234-2.77-.383-2.338-.361-4.324-1.319-5.96-2.874-.374-.319-.713-.66-1.017-1.021-.188-.213-.49-.617-.911-1.213-.421-.596-.795-1.208-1.122-1.836-.327-.627-.83-1.697-1.508-3.208l-3.681-.096v6.123c0,1.389.829,2.083,2.489,2.083h.806v1.852h-11.533Zm8.238-11.973h4.207c1.823,0,3.12-.361,3.892-1.085.958-.873,1.437-2.054,1.437-3.544,0-1.426-.444-2.543-1.332-3.353-.889-.809-2.127-1.213-3.716-1.213h-2.805c-.654,0-1.099.128-1.332.383s-.351.734-.351,1.437v7.375Z" fill="#b2b2b2"></path>
</g>
</g>
<rect fill="#b2b2b2" height="1.613" width="485.693" y="41.995"></rect>
<rect fill="#b2b2b2" height="1.613" width="485.693"></rect>
</svg>
</div>
<canvas height="280" id="logoCanvas" width="900"></canvas>
<div class="controls">
<div>
<label for="topText">Top Text:</label>
<input id="topText" type="text"/>
<label for="bottomText">Bottom Text:</label>
<input id="bottomText" type="text"/>
<label>Line Width</label>
<input id="svgWidthSlider" max="1000" min="100" type="range" value="450"/>
</div>
<label>Font Color:</label>
<div id="fontColorPicker"></div>
<label>Line Color:</label>
<div id="lineColorPicker"></div><br/>
<button id="downloadBtn">Download SVG</button>
</div>
</div>
<script src="fabric/fabric.js"></script>
<script src="https://cdn.jsdelivr.net/npm/opentype.js@latest/dist/opentype.min.js"></script>
<script>
    document.fonts.load('1em "VintageHat"').then(function () {
        const canvas = new fabric.Canvas('logoCanvas');
        let loadedObject;
        let topText, bottomText;

fabric.loadSVGFromURL('SVG.svg', function (objects, options) {
  loadedObject = fabric.util.groupSVGElements(objects, options);
  const scaleFactor = 182.598 / loadedObject.height;
  loadedObject.set({
    left: canvas.width / 2,
    top: canvas.height / 2,
    scaleX: scaleFactor,
    scaleY: scaleFactor,
    originX: 'center',
    originY: 'center'
  });
  canvas.add(loadedObject);

  // Initialize default text for top and bottom
  topText = addTopText(110, "TEAM", "#000000");
  canvas.add(topText);
  
  bottomText = addBottomText(195, "LACROSSE", "#000000");
  canvas.add(bottomText);

  canvas.renderAll();
});

        function generateColorOptions(elementId, colors, callback) {
            const container = document.getElementById(elementId);
            colors.forEach(color => {
                const colorOption = document.createElement('div');
                colorOption.classList.add('color-option');
                colorOption.style.backgroundColor = color.value;
                colorOption.title = color.label;
                colorOption.addEventListener('click', () => {
                    callback(color.value);
                });
                container.appendChild(colorOption);
            });
        }

    const colorOptions = [
  { value: '#ffffff', label: 'White' },
  { value: '#a2a9ad', label: 'Grey' },
  { value: '#0D131A', label: 'Black' },
  { value: '#373a36', label: 'Dark Grey' },
  { value: '#513629', label: 'Brown' },
  { value: '#d0b787', label: 'Vegas Khaki' },
  { value: '#85714D', label: 'Metallic Gold' },
  { value: '#12284b', label: 'Navy Blue' },
  { value: '#114734', label: 'Forest Green' },
  { value: '#007940', label: 'Kelly Green' },
  { value: '#006271', label: 'Deep Teal' },
  { value: '#00b1bd', label: 'Light Teal' },
  { value: '#6fa2e4', label: 'Nike Carolina' },
  { value: '#418fde', label: 'Hopkins Blue' },
  { value: '#174293', label: 'Nike Cobalt' },
  { value: '#6dd6ff', label: 'Cascade Carolina' },
  { value: '#80fff3', label: 'Seafoam' },
  { value: '#93d500', label: 'Lime Green' },
  { value: '#03db48', label: 'Electric Green' },
  { value: '#ffb71b', label: 'Athletic Gold' },
  { value: '#fff200', label: 'Yellow' },
  { value: '#ee3724', label: 'Nike Orange' },
  { value: '#ff5219', label: 'Cascade Orange' },
  { value: '#FF8200', label: 'Tennesee Orange' },
  { value: '#592d82', label: 'Purple' },
  { value: '#f732a1', label: 'Hot Pink' },
  { value: '#ffa5d8', label: 'Light Pink' },
  { value: '#6e0624', label: 'Burgundy' },
  { value: '#50131f', label: 'Deep Burgundy' },
  { value: '#A41034', label: 'Crimson' },
  { value: '#d00120', label: 'Scarlet Red' },
  { value: '#CD5A13', label: 'Texas Orange' }
];


 generateColorOptions('fontColorPicker', colorOptions, (color) => {
  if (topText) {
    topText.set({ fill: color });
  }
  if (bottomText) {
    bottomText.set({ fill: color });
  }
  canvas.renderAll();
});


        generateColorOptions('lineColorPicker', colorOptions, (color) => {
            if (loadedObject) {
                loadedObject.set({fill: color});
                canvas.renderAll();
            }
        });



// Adding top text
function addTopText(position, text, color) {
  const newText = new fabric.Text(text, {
    left: canvas.width / 2,
    top: position,
    fill: color,
    fontSize: 107,
    fontFamily: 'VintageHat',
    originX: 'center',
    originY: 'center'
  });
  return newText;
}

document.getElementById('topText').addEventListener('input', function () {
  if (topText) {
    canvas.remove(topText);
  }
  topText = addTopText(110, this.value, '#000000');
  canvas.add(topText);
  canvas.renderAll();
});

// Adding bottom text
function addBottomText(position, text, color) {
  const newText = new fabric.Text(text, {
    left: canvas.width / 2,
    top: position,
    fill: color,
    fontSize: 66.6757,
    fontFamily: 'VintageHat',
    originX: 'center',
    originY: 'center'
  });
  return newText;
}

document.getElementById('bottomText').addEventListener('input', function () {
  if (bottomText) {
    canvas.remove(bottomText);
  }
  bottomText = addBottomText(195, this.value, '#000000');
  canvas.add(bottomText);
  canvas.renderAll();
});

        document.getElementById('svgWidthSlider').addEventListener('input', function() {
  if (loadedObject) {
    const newWidth = parseFloat(this.value);
    const scaleFactor = newWidth / loadedObject.getScaledWidth();
    
    loadedObject.set({
      scaleX: loadedObject.scaleX * scaleFactor
    });

    canvas.renderAll();
  }
});


function textToPath(textObject, callback) {
  if (!textObject) return;

  const textAsSVG = textObject.toSVG();
  fabric.loadSVGFromString(textAsSVG, function (objects, options) {
    const pathObject = fabric.util.groupSVGElements(objects, options);
    pathObject.set({
      left: textObject.left,
      top: textObject.top,
      fill: textObject.fill,
      originX: 'center',
      originY: 'center'
    });
    callback(pathObject);
  });
}

document.getElementById('download-svg').addEventListener('click', async function () {
    // Get objects from canvas
    const objects = canvas.getObjects();
    
    // Load the font (assuming Arial for demo; replace with your actual font and its URL)
    const fontUrl = 'Vintagehat.otf';  // Replace with the actual path or URL to your font file

    // Create an SVG document to store paths
    const parser = new DOMParser();
    const serializer = new XMLSerializer();
    let svgStr = canvas.toSVG();
    let svgDoc = parser.parseFromString(svgStr, 'image/svg+xml');
    
    for (let i = 0; i < objects.length; i++) {
        if (objects[i].type === 'text') {
            const textObj = objects[i];
            const text = textObj.text;
            const x = textObj.left;
            const y = textObj.top + textObj.height;  // Adjust y-coordinate

            try {
                const pathData = await textToPath(fontUrl, text, x, y);
                // Create path element
                const pathElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                pathElement.setAttribute('d', pathData);
                
                // Remove the text element from SVG
                const textElements = svgDoc.querySelectorAll('text');
                textElements[i].remove();

                // Append the path element to SVG
                svgDoc.documentElement.appendChild(pathElement);
            } catch (err) {
                console.error('Error in text to path conversion:', err);
            }
        }
    }
    
    // Serialize the updated SVG document to string
    const updatedSvgStr = serializer.serializeToString(svgDoc);
    
    // Download the updated SVG
    const blob = new Blob([updatedSvgStr], { type: 'image/svg+xml' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'canvas.svg';
    a.click();
});




        
document.addEventListener("DOMContentLoaded", function() {
    });
</script><script>
// Function to convert Fabric.js text to paths using OpenType.js
async function textToPaths(textObj) {
  return new Promise((resolve, reject) => {
    opentype.load('VintageHat.OTF', function(err, font) {
      if (err) {
        reject(err);
        return;
      }
      const path = font.getPath(textObj.text, 0, 0, textObj.fontSize);
      const pathData = path.toSVG();
      resolve(pathData);
    });
  });
}

// Update download function to convert all text objects to paths
document.getElementById('download-svg').addEventListener('click', async function() {
  const canvasObjects = canvas.getObjects();
  for (const obj of canvasObjects) {
    if (obj.type === 'text') {
      try {
        const pathData = await textToPaths(obj);
        const pathObj = new fabric.Path(pathData);
        pathObj.set({
          left: obj.left,
          top: obj.top,
          fill: obj.fill,
          angle: obj.angle
        });
        canvas.remove(obj);
        canvas.add(pathObj);
      } catch (err) {
        console.error('Error converting text to path:', err);
      }
    }
  }
  const svgData = canvas.toSVG();
  const blob = new Blob([svgData], {type: 'image/svg+xml'});
  const url = URL.createObjectURL(blob);
  const link = document.createElement('a');
  link.href = url;
  link.download = 'canvas.svg';
  link.click();
  URL.revokeObjectURL(url);
});
});
</script>
</body>
</html>
